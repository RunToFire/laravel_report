function invertColor(hex){if(hex.indexOf("#")===0){hex=hex.slice(1)}if(hex.length===3){hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]}if(hex.length!==6){throw new Error("Invalid HEX color.")}var r=parseInt(hex.slice(0,2),16),g=parseInt(hex.slice(2,4),16),b=parseInt(hex.slice(4,6),16);return r*.299+g*.587+b*.114>186?"#000000":"#FFFFFF"}function category_edit(item){document.forms["myform"].id.value=getTableCell(item,0);document.forms["myform"].category.value=getTableCell(item,1);document.forms["myform"].sortorder.value=getTableCell(item,2);document.forms["myform"].color.value=getTableCell(item,3);if(!Modernizr.inputtypes.color){document.forms["myform"].color.style.backgroundColor=getTableCell(item,3);document.forms["myform"].color.style.color=invertColor(getTableCell(item,3))}}function category_del(item){var query,name=getTableCell(item,1);if(name==""){query=mydbr_loc["MYDBR_CAT_UNNAMED"]}else{query="'"+getTableCell(item,1)+"'"}if(confirm(sprintf(mydbr_loc["MYDBR_CAT_REM"],query))){document.forms["myform"].action.value="del";document.forms["myform"].id.value=getTableCell(item,0);document.forms["myform"].submit()}}function category_cancel(level){document.forms["myform"].id.value=-2;var cv,m=0;$("#category tbody tr").each(function(){cv=parseInt($(this).children().eq(2).text(),10);if(cv>m){m=cv}});$("#cat_name").css("color","inherit");document.forms["myform"].category.value="";document.forms["myform"].sortorder.value=m+10;$('input[name="color"]').val("#D2006B")}$(function(){$("#myform").on("submit",function(e){if($('input[name="category"]').val()==""){$("#cat_name").css("color","red");$('input[name="category"]').focus();e.preventDefault()}})});